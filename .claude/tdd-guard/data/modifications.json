{
  "session_id": "e91c461e-d935-40ca-9658-b10652d9eed9",
  "transcript_path": "C:\\Users\\gatli\\.claude\\projects\\C--Users-gatli-Projects-wigg\\e91c461e-d935-40ca-9658-b10652d9eed9.jsonl",
  "hook_event_name": "PreToolUse",
  "tool_name": "Edit",
  "tool_input": {
    "file_path": "C:\\Users\\gatli\\Projects\\wigg\\src\\components\\__tests__\\WiggPointCard.migration.test.tsx",
    "old_string": "describe('WiggPointCard Migration', () => {\n  it('should have completed data layer migration with feature flag', async () => {\n    const fs = await import('fs');\n    const path = await import('path');\n\n    const wiggPointCardPath = path.resolve(__dirname, '../WiggPointCard.tsx');\n    const wiggPointCardContent = fs.readFileSync(wiggPointCardPath, 'utf-8');\n\n    // Verify all required imports are present\n    expect(wiggPointCardContent).toContain('useWiggLikesDataLayer');\n    expect(wiggPointCardContent).toContain('useFeatureFlag');\n\n    // Verify feature flag usage\n    expect(wiggPointCardContent).toContain('wigg-point-card-data-layer');\n\n    // Verify coexistence pattern implementation\n    expect(wiggPointCardContent).toContain('useNewDataLayer');\n    expect(wiggPointCardContent).toContain('legacyLikesData');\n    expect(wiggPointCardContent).toContain('newLikesData');\n  });\n});",
    "new_string": "describe('WiggPointCard Migration', () => {\n  it('should have completed data layer migration with feature flag for both likes and comments', async () => {\n    const fs = await import('fs');\n    const path = await import('path');\n\n    const wiggPointCardPath = path.resolve(__dirname, '../WiggPointCard.tsx');\n    const wiggPointCardContent = fs.readFileSync(wiggPointCardPath, 'utf-8');\n\n    // Verify all required imports are present\n    expect(wiggPointCardContent).toContain('useWiggLikesDataLayer');\n    expect(wiggPointCardContent).toContain('useWiggCommentsDataLayer');\n    expect(wiggPointCardContent).toContain('useFeatureFlag');\n\n    // Verify feature flag usage\n    expect(wiggPointCardContent).toContain('wigg-point-card-data-layer');\n\n    // Verify coexistence pattern implementation for likes\n    expect(wiggPointCardContent).toContain('legacyLikesData');\n    expect(wiggPointCardContent).toContain('newLikesData');\n\n    // Verify coexistence pattern implementation for comments\n    expect(wiggPointCardContent).toContain('legacyCommentsData');\n    expect(wiggPointCardContent).toContain('newCommentsData');\n\n    // Verify conditional usage for both\n    expect(wiggPointCardContent).toContain('useNewDataLayer ? newLikesData : legacyLikesData');\n    expect(wiggPointCardContent).toContain('useNewDataLayer ? newCommentsData : legacyCommentsData');\n  });\n});"
  }
}