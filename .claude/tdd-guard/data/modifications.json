{
  "session_id": "e91c461e-d935-40ca-9658-b10652d9eed9",
  "transcript_path": "C:\\Users\\gatli\\.claude\\projects\\C--Users-gatli-Projects-wigg\\e91c461e-d935-40ca-9658-b10652d9eed9.jsonl",
  "hook_event_name": "PreToolUse",
  "tool_name": "Edit",
  "tool_input": {
    "file_path": "C:\\Users\\gatli\\Projects\\wigg\\src\\components\\media\\MediaTile.tsx",
    "old_string": "  // Feature flag for data layer coexistence\n  const useNewDataLayer = useFeatureFlag('media-tile-data-layer');\n  const legacyWiggsData = useUserWiggs(titleKey, { enabled: !useNewDataLayer });\n  const newWiggsData = useUserWiggsDataLayer(titleKey, { enabled: useNewDataLayer });",
    "new_string": "  // Feature flag for data layer coexistence\n  // TODO CRITICAL: Both hooks execute unconditionally - options parameter ignored!\n  // This causes 118+ API calls to title_metrics instead of expected <20\n  // SOLUTION: Implement enabled option support in useUserWiggs and useUserWiggsDataLayer\n  const useNewDataLayer = useFeatureFlag('media-tile-data-layer');\n  const legacyWiggsData = useUserWiggs(titleKey, { enabled: !useNewDataLayer });\n  const newWiggsData = useUserWiggsDataLayer(titleKey, { enabled: useNewDataLayer });"
  }
}