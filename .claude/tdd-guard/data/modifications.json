{
  "session_id": "e91c461e-d935-40ca-9658-b10652d9eed9",
  "transcript_path": "C:\\Users\\gatli\\.claude\\projects\\C--Users-gatli-Projects-wigg\\e91c461e-d935-40ca-9658-b10652d9eed9.jsonl",
  "hook_event_name": "PreToolUse",
  "tool_name": "Edit",
  "tool_input": {
    "file_path": "C:\\Users\\gatli\\Projects\\wigg\\src\\data\\mocks\\handlers\\userPreferencesHandlers.ts",
    "old_string": "export const userPreferencesHandlers = [\n  // Get user preferences (.single() returns single object)\n  http.get('https://test.supabase.co/rest/v1/user_preferences', ({ request }) => {\n    const url = new URL(request.url);\n    const userId = url.searchParams.get('user_id');\n\n    return HttpResponse.json({\n      id: `pref-${userId}`,\n      user_id: userId,\n      spoiler_sensitivity: 1,\n      trusted_users: ['user-789'],\n      created_at: '2024-01-01T00:00:00Z',\n      updated_at: '2024-01-01T00:00:00Z'\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  }),\n];",
    "new_string": "export const userPreferencesHandlers = [\n  // Get user preferences (.single() returns single object)\n  http.get('https://test.supabase.co/rest/v1/user_preferences', ({ request }) => {\n    const url = new URL(request.url);\n    console.log('MSW intercepted user_preferences request:', request.url);\n\n    // Supabase uses eq filter format: ?user_id=eq.value\n    const userIdFilter = url.searchParams.get('user_id');\n    const userId = userIdFilter?.replace('eq.', '') || 'user-123';\n\n    return HttpResponse.json({\n      id: `pref-${userId}`,\n      user_id: userId,\n      spoiler_sensitivity: 1,\n      trusted_users: ['user-789'],\n      created_at: '2024-01-01T00:00:00Z',\n      updated_at: '2024-01-01T00:00:00Z'\n    }, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  }),\n];"
  }
}