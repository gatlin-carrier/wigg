{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gatli/Projects/wigg/apps/wigg-admin/lib/supabaseAdmin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n\r\nexport function supabaseAdmin() {\r\nconst url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\r\nif (!url || !serviceKey) {\r\n  throw new Error('Missing Supabase env vars (URL or Service Role).');\r\n}\r\nreturn createClient(url, serviceKey, {\r\n  auth: { persistSession: false },\r\n});\r\n}"],"names":[],"mappings":";;;;AAAA;;AAGO,SAAS;IAChB,MAAM;IACN,MAAM,aAAa,QAAQ,GAAG,CAAC,yBAAyB;IACxD,IAAI,CAAC,OAAO,CAAC,YAAY;QACvB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAA,0OAAY,EAAC,KAAK,YAAY;QACnC,MAAM;YAAE,gBAAgB;QAAM;IAChC;AACA","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gatli/Projects/wigg/apps/wigg-admin/lib/schema.ts"],"sourcesContent":["export const SCHEMA = {\r\n  seedTable: process.env.MOMENTS_SEED_TABLE || 'moments_seed',\r\n  momentsTable: process.env.MOMENTS_TABLE || 'moments',\r\n  // Column mappings for seed table (adapt if your schema differs)\r\n  seedCols: {\r\n    id: 'id',\r\n    title: 'content_title',\r\n    season: 'season',\r\n    episode: 'episode',\r\n    minute: 'minute',\r\n    sourceUrl: 'source_url',\r\n    sourceType: 'source_type',\r\n    sourceSubreddit: 'source_subreddit',\r\n    sourceKind: 'source_kind',\r\n    sourceId: 'source_id',\r\n    score: 'score',\r\n    confidence: 'confidence',\r\n    quote: 'quote',\r\n    createdUtc: 'created_utc',\r\n    status: 'status',\r\n    insertedAt: 'inserted_at',\r\n  },\r\n  momentsCols: {\r\n    id: 'id',\r\n    title: 'content_title',\r\n    season: 'season',\r\n    episode: 'episode',\r\n    minute: 'minute',\r\n    confidence: 'confidence',\r\n    sourceUrl: 'source_url',\r\n    source: 'source',\r\n    quoted: 'quoted',\r\n    createdUtc: 'created_utc',\r\n    insertedAt: 'inserted_at',\r\n  },\r\n};"],"names":[],"mappings":";;;;AAAO,MAAM,SAAS;IACpB,WAAW,QAAQ,GAAG,CAAC,kBAAkB,IAAI;IAC7C,cAAc,QAAQ,GAAG,CAAC,aAAa,IAAI;IAC3C,gEAAgE;IAChE,UAAU;QACR,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,WAAW;QACX,YAAY;QACZ,iBAAiB;QACjB,YAAY;QACZ,UAAU;QACV,OAAO;QACP,YAAY;QACZ,OAAO;QACP,YAAY;QACZ,QAAQ;QACR,YAAY;IACd;IACA,aAAa;QACX,IAAI;QACJ,OAAO;QACP,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,YAAY;QACZ,WAAW;QACX,QAAQ;QACR,QAAQ;QACR,YAAY;QACZ,YAAY;IACd;AACF","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gatli/Projects/wigg/apps/wigg-admin/app/api/moderation/reject/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { z } from 'zod';\r\nimport { supabaseAdmin } from '@/lib/supabaseAdmin';\r\nimport { SCHEMA } from '@/lib/schema';\r\n\r\n\r\nconst Body = z.object({ id: z.number(), reason: z.string().optional() });\r\n\r\n\r\nexport async function POST(req: NextRequest) {\r\nconst db = supabaseAdmin();\r\nconst body = await req.json();\r\nconst parsed = Body.safeParse(body);\r\nif (!parsed.success) return NextResponse.json({ error: parsed.error.format() }, { status: 400 });\r\n\r\n\r\nconst cols = SCHEMA.seedCols;\r\nconst updates: Record<string, any> = { [cols.status]: 'rejected' };\r\nif (parsed.data.reason) updates['reject_reason'] = parsed.data.reason; // harmless if column doesn't exist\r\n\r\n\r\nconst { error } = await db.from(SCHEMA.seedTable)\r\n.update(updates)\r\n.eq(cols.id, parsed.data.id);\r\nif (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n\r\n\r\nreturn NextResponse.json({ ok: true });\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAGA,MAAM,OAAO,iLAAC,CAAC,MAAM,CAAC;IAAE,IAAI,iLAAC,CAAC,MAAM;IAAI,QAAQ,iLAAC,CAAC,MAAM,GAAG,QAAQ;AAAG;AAG/D,eAAe,KAAK,GAAgB;IAC3C,MAAM,KAAK,IAAA,wKAAa;IACxB,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,SAAS,KAAK,SAAS,CAAC;IAC9B,IAAI,CAAC,OAAO,OAAO,EAAE,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE,OAAO,OAAO,KAAK,CAAC,MAAM;IAAG,GAAG;QAAE,QAAQ;IAAI;IAG9F,MAAM,OAAO,0JAAM,CAAC,QAAQ;IAC5B,MAAM,UAA+B;QAAE,CAAC,KAAK,MAAM,CAAC,EAAE;IAAW;IACjE,IAAI,OAAO,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,gBAAgB,GAAG,OAAO,IAAI,CAAC,MAAM,EAAE,mCAAmC;IAG1G,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,GAAG,IAAI,CAAC,0JAAM,CAAC,SAAS,EAC/C,MAAM,CAAC,SACP,EAAE,CAAC,KAAK,EAAE,EAAE,OAAO,IAAI,CAAC,EAAE;IAC3B,IAAI,OAAO,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE,OAAO,MAAM,OAAO;IAAC,GAAG;QAAE,QAAQ;IAAI;IAG5E,OAAO,iLAAY,CAAC,IAAI,CAAC;QAAE,IAAI;IAAK;AACpC","debugId":null}}]
}